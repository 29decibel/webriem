<%= form_for @doc_head do |f| %>
<h3 class="form_title"><%= @title%></h3>
<div class="field">
	<%= f.label "单号",:class=>"input_label" %>
	<div class="input_area">
		<p class="input">
			<%= f.text_field :doc_no,:class=>"basic_input "+ mark_required(@doc_head, :doc_no) %>
		</p>
		<p class="tip"></p>
	</div>
	<span class="error_message"></span>    
  </div>
<div class="field">
	<%= f.label "附件个数",:class=>"input_label" %>
	<div class="input_area">
		<p class="input">
			<%= f.text_field :attach,:class=>"basic_input "+ mark_required(@doc_head, :attach) %>
		</p>
		<p class="tip"></p>
	</div>
	<span class="error_message"></span>    
  </div>
<div class="field">
	<%= f.label "申请人",:class=>"input_label" %>
	<div class="input_area">
		<p class="input">
			<%= f.hidden_field :person_id %>
			<span><%= @doc_head.person_name%></span>
		</p>
		<p class="tip"></p>
	</div>
	<span class="error_message"></span>    
  </div>
<div class="field">
	<%= f.label "备注",:class=>"input_label" %>
	<div class="input_area">
		<p class="input">
			<%= f.text_field :note,:class=>"basic_input "+ mark_required(@doc_head, :note) %>
		</p>
		<p class="tip"></p>
	</div>
	<span class="error_message"></span>    
  </div>
<% if @doc_head.doc_type>4 %>
<div class="field">
	<%= f.label "申请日期",:class=>"input_label" %>
	<div class="input_area">
		<p class="input">
			<%= f.text_field :apply_date,:class=>"datepicker basic_input" %>
		</p>
		<p class="tip"></p>
	</div>
	<span class="error_message"></span>    
  </div>
<div class="field">
	<%= f.label "部门",:class=>"input_label" %>
	<div class="input_area">
		<p class="input">
			<%= collection_select(:doc_head, :dep_id, Dep.all, :id, :name, {:include_blank => 'None'},{:class=>"basic_input"})%>
		</p>
		<p class="tip"></p>
	</div>
	<span class="error_message"></span>    
  </div>
<div class="field">
	<%= f.label "费用类型",:class=>"input_label" %>
	<div class="input_area">
		<p class="input">
			<%= collection_select(:doc_head, :fee_id, Fee.all, :id, :name, {:include_blank => 'None'},{:class=>"basic_input"})%>
		</p>
		<p class="tip"></p>
	</div>
	<span class="error_message"></span>    
 </div>
<% end %>
<%= f.hidden_field :doc_type%>
<hr/>
<!--根据不同的单据类型render不同的单据-->
<div id="details">
	<!---->
	<% if @doc_head.doc_type<=2%>
	<div id="cp_details">
		<% f.fields_for :cp_doc_details do |builder|  %>
			<%= render :partial => 'cp_doc_detail_fields',:locals => { :f => builder } %>
		<% end %>
		<%= link_to_add_fields "添加明细",f,:cp_doc_details %>
	</div>
	<% elsif @doc_head.doc_type==3%>
	<div id="reim_details">
		<% f.fields_for :reim_details do |builder| %>
			<%= render :partial => 'reim_detail_fields',:locals => { :f => builder } %>
		<% end %>
		<%= link_to_add_fields "添加报销单明细",f,:reim_details %>
	</div>
	<% elsif @doc_head.doc_type==4%>
	<div id="reim_details">
		<% f.fields_for :rec_notice_details do |builder| %>
			<%= render :partial => 'rec_notice_detail_fields',:locals => { :f => builder } %>
		<% end %>
		<%= link_to_add_fields "添加收款明细",f,:rec_notice_details %>
	</div>
	<% end %>
	<hr/>
	<% if @doc_head.doc_type<=4%>
	<div id="recivers">
		<% f.fields_for :recivers do |builder|  %>
			<%= render :partial => 'reciver_fields',:locals => { :f => builder }  %>
		<% end %>
		<%= link_to_add_fields "添加收款人",f,:recivers %>
	</div>
	<% end %>	
	<!--结汇申请单-->
	<% if @doc_head.doc_type==5%>
	<div id="inner_remittance">
		<% f.fields_for :inner_remittances do |builder|  %>
			<%= render :partial => 'inner_remittance',:locals => { :f => builder }  %>
		<% end %>
	</div>
	<% end %>
	<!--转帐申请单-->
	<% if @doc_head.doc_type==6%>
	<div id="inner_transfer">
		<% f.fields_for :inner_transfers do |builder|  %>
			<%= render :partial => "inner_transfer",:locals => { :f => builder }  %>
		<% end %>
	</div>
	<% end %>
	<!--现金提取申请单-->
	<% if @doc_head.doc_type==7%>
	<div id="inner_cash_draw">
		<% f.fields_for :inner_cash_draws do |builder|  %>
			<%= render :partial => "inner_cash_draw",:locals => { :f => builder }  %>
		<% end %>
	</div>
	<% end %>
</div>
  <div class="actions">
    <%= f.submit "保存" %>
  </div>
<% end %>